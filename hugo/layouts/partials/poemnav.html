{{ $key := "poemIndex" }}
{{ if not (site.Store.Get $key) }}
{{ $pages := sort (where site.RegularPages "Section" "poems") "Date" "asc" }}
{{ $indexMap := dict }}
{{ range $i, $p := $pages }}
{{ $indexMap = merge $indexMap (dict $p.File.Path $i) }}
{{ end }}
{{ site.Store.Set $key (dict "pages" $pages "idx" $indexMap) }}
{{ end }}

{{ $data := site.Store.Get $key }}
{{ $pages := $data.pages }}
{{ $idx := $data.idx }}
{{ $pos := index $idx .File.Path }}
{{ if gt $pos 0 }}
{{ $prev := index $pages (sub $pos 1) }}
<a class="left-icon noline" href="{{ $prev.RelPermalink }}">
  <svg xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 640 640"><!--!Font Awesome Free v7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
    <path fill="currentColor"
      d="M416 160C416 147.1 408.2 135.4 396.2 130.4C384.2 125.4 370.5 128.2 361.3 137.3L201.3 297.3C188.8 309.8 188.8 330.1 201.3 342.6L361.3 502.6C370.5 511.8 384.2 514.5 396.2 509.5C408.2 504.5 416 492.9 416 480L416 160z" />
  </svg>
</a>
{{ end }}
{{ if lt (add $pos 1) (len $pages) }}
{{ $next := index $pages (add $pos 1) }}
<a class="right-icon noline" href="{{ $next.RelPermalink }}">
  <svg xmlns="http://www.w3.org/2000/svg"
    viewBox="0 0 640 640"><!--!Font Awesome Free v7.0.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free Copyright 2025 Fonticons, Inc.-->
    <path fill="currentColor"
      d="M224.5 160C224.5 147.1 232.3 135.4 244.3 130.4C256.3 125.4 270 128.2 279.1 137.4L439.1 297.4C451.6 309.9 451.6 330.2 439.1 342.7L279.1 502.7C269.9 511.9 256.2 514.6 244.2 509.6C232.2 504.6 224.5 492.9 224.5 480L224.5 160z" />
  </svg>
</a>
{{ end }}
